<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GROW - Weed Plant Growing Game</title>
    <link rel="stylesheet" href="css/style.css?v=8.4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="js/main.js?v=10.3"></script>
</head>
<body>
    <!-- Invite Code Overlay -->
    <div class="auth-overlay" id="inviteCodeOverlay">
        <div class="auth-container">
            <h1 class="auth-title">GOT AN INVITE CODE?</h1>
            <p class="auth-subtitle">GROW is an exclusive, invite-only network.</p>
            
            <div class="code-inputs">
                <input type="text" class="code-input" maxlength="1" data-index="0">
                <input type="text" class="code-input" maxlength="1" data-index="1">
                <input type="text" class="code-input" maxlength="1" data-index="2">
                <input type="text" class="code-input" maxlength="1" data-index="3">
                <input type="text" class="code-input" maxlength="1" data-index="4">
            </div>
            
            <div class="error-message" id="codeErrorMessage"></div>
            
            <button class="auth-btn proceed-btn" id="proceedBtn">PROCEED</button>
            <button class="auth-btn secondary-btn" id="getCodeBtn">WANT TO GET CODE?</button>
        </div>
    </div>

    <!-- Username & Wallet Overlay -->
    <div class="auth-overlay" id="registrationOverlay" style="display: none;">
        <div class="auth-container">
            <h1 class="auth-title">WELCOME TO GROW</h1>
            <p class="auth-subtitle">Create your account to start growing.</p>
            
            <div class="registration-form">
                <div class="form-group">
                    <label for="usernameInput">USERNAME</label>
                    <input type="text" id="usernameInput" class="auth-input" placeholder="Enter username" maxlength="20">
                </div>
                
                <div class="form-group">
                    <label for="walletInput">SOLANA WALLET ADDRESS</label>
                    <input type="text" id="walletInput" class="auth-input" placeholder="Enter wallet address">
                </div>
            </div>
            
            <div class="error-message" id="registrationErrorMessage"></div>
            
            <button class="auth-btn proceed-btn" id="confirmRegistrationBtn">CONFIRM</button>
        </div>
    </div>

    <!-- Welcome Tutorial Popup -->
    <div class="welcome-overlay" id="welcomeOverlay" style="display: none;">
        <div class="welcome-container">
            <h1 class="welcome-title">Welcome to Grow!</h1>
            
            <div class="tutorial-content">
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/sprout.png" alt="Plant" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Plant</h3>
                        <p>Place plants on your grid to start growing BUD tokens.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/harvest.png" alt="Harvest" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Harvest</h3>
                        <p>Harvest your BUD to your Solana wallet by clicking the "Harvest" button.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/sprites/refer.png" alt="Refer" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Refer</h3>
                        <p>Refer your friends to earn 2% of their harvested BUD.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/sprites/cart.png" alt="Shop" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Shop</h3>
                        <p>Buy & place better plants to grow more BUD, or cosmetic items to enhance your growing experience.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/casinowelcome.png" alt="Casino" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Casino</h3>
                        <p>Gamble your way to the top, by putting your BUD on the line.</p>
                    </div>
                </div>
            </div>
            
            <!-- Page 2 Tutorial Content (initially hidden) -->
            <div class="tutorial-content upgrade-style" id="tutorialPage2" style="display: none;">
                <h2 style="color: #00ff41; text-align: center; margin-bottom: 20px;">How to get started</h2>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/free-joint.png" alt="Free Joint" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Free Joint</h3>
                        <p>We've added a complimentary Joint to your inventory.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/joint-inventory.png" alt="Joint Inventory" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Place Joint</h3>
                        <p>Click on the Joint in your inventory & press "Equip". Select a tile in your room to place it.</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <img src="assets/upgradejoint.png" alt="Interact" class="step-icon-img">
                    </div>
                    <div class="step-text">
                        <h3>Interact</h3>
                        <p>Click on the items in your room to interact with them. Click on the Joint to interact with it!</p>
                    </div>
                </div>
                
                <div class="tutorial-step">
                    <div class="step-icon">
                        <button class="joint-upgrade-btn">
                            Upgrade to Sprout
                        </button>
                    </div>
                    <div class="step-text">
                        <h3>Upgrade</h3>
                        <p>When you're ready to start playing, click on the Joint in your room & select <span style="color: #ff8c00;">"Upgrade to Sprout"</span>. - <em class="urgent-text">Be quick as they will sell out fast!</em></p>
                    </div>
                </div>
                
            </div>
            
            <div class="welcome-buttons-container">
                <button class="welcome-btn" id="welcomeConfirmBtn">NEXT PAGE</button>
                <button class="welcome-btn upgrade-now-btn" id="upgradeNowBtn" style="display: none;">UPGRADE NOW!</button>
            </div>
        </div>
    </div>

    <!-- Buy Button -->
    <a href="#" class="buy-button" id="buyButton">BUY $BUD</a>
    
    <!-- Help Button -->
    <img src="assets/sprites/q.png" alt="Help" class="help-button" id="helpButton" title="Tutorial" style="width: 30px; height: 30px; cursor: pointer;">
    
    <!-- Referral Code Display -->
    <div class="referral-code-display" id="referralCodeDisplay" style="display: none;">
        <div class="referral-label">YOUR CODE:</div>
        <div class="referral-code" id="referralCodeText">LOADING...</div>
        <button class="copy-code-btn" id="copyCodeBtn" title="Copy to clipboard">ðŸ“‹</button>
    </div>
    
    <div class="game-container">
        <!-- Header with title -->
        <header class="game-header">
            <div class="title-section">
                <img src="assets/grow-logo.png" alt="GROW" class="game-title-logo">
                <div class="subtitle">GROW â€¢ EARN â€¢ PROFIT</div>
            </div>
        </header>

        <!-- Main game area -->
        <main class="game-main">
            <!-- Isometric Room View -->
            <div class="room-container">
                <div class="room-view">
                    <!-- Background room image -->
                    <img src="assets/room-background.png" alt="Room" class="room-background" id="roomBackground">
                    
                    <!-- Grid overlay for tile interaction -->
                    <div class="grid-overlay" id="gridOverlay"></div>
                    
                    <!-- BUD particle effects will spawn here -->
                    <div class="particle-container" id="particleContainer"></div>
                    
                    <!-- Customize Room Button (bottom left) -->
                    <button class="room-customize-btn" id="customizeBtn" title="Customize Room">
                        CUSTOMIZE
                    </button>
                </div>
            </div>

            <!-- Control panel -->
            <div class="control-panel">
                <!-- BUD Generation Stats -->
                <div class="bud-generation-stats">
                    <h3>BUD GENERATION</h3>
                    
                    <!-- Total BUD Counter -->
                    <div class="total-bud-display">
                        <div class="bud-counter" id="budCounter">0.00</div>
                        <div class="bud-value" id="budValue">$0.00</div>
                    </div>
                    
                    <div class="gen-stat-list">
                        <div class="gen-stat-item">
                            <span class="gen-stat-label">Per Day:</span>
                            <span class="gen-stat-value" id="perDay">0.00 BUD/day</span>
                        </div>
                        <div class="gen-stat-item">
                            <span class="gen-stat-label">Session Total:</span>
                            <span class="gen-stat-value" id="sessionTotal">0.00 BUD</span>
                        </div>
                        <div class="gen-stat-item harvest-ready">
                            <button class="action-btn harvest-btn" id="harvestBtn" title="Harvest BUD" disabled>
                                HARVEST
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Inventory Section -->
                <div class="inventory-section">
                    <h3>INVENTORY</h3>
                    <div class="inventory-grid" id="inventoryGrid">
                        <!-- Inventory items will be added dynamically -->
                        <!-- Empty slots shown by default -->
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                    </div>
                    
                    <!-- Equip Button (hidden by default) -->
                    <div class="equip-panel" id="equipPanel" style="display: none;">
                        <button class="equip-close-btn" id="equipCloseBtn" aria-label="Close">&times;</button>
                        <div class="equip-item-details">
                            <img src="" alt="" class="equip-item-preview" id="equipItemPreview">
                            <div class="equip-item-name" id="equipItemName">Item Name</div>
                        </div>
                        <button class="action-btn equip-btn" id="equipBtn">
                            EQUIP
                        </button>
                    </div>
                </div>

                <!-- BUD generation rate (removed old section) -->
            </div>
        </main>

        <!-- Token info section -->
        <section class="token-info">
            <div class="token-stats">
                <!-- Tab Headers -->
                <div class="tab-headers">
                    <button class="tab-btn active" data-tab="profile">PROFILE</button>
                    <button class="tab-btn" data-tab="stats">TOKEN STATS</button>
                    <button class="tab-btn" data-tab="calculator">CALCULATOR</button>
                    <button class="tab-btn" data-tab="casino">CASINO</button>
                </div>
                
                <!-- Token Stats Tab Content -->
                <div class="tab-content" id="statsTab">
                    <div class="token-details">
                        <div class="token-stat">
                            <span class="token-label">Total Supply:</span>
                            <span class="token-value">1,000,000,000 BUD</span>
                        </div>
                        <div class="token-stat">
                            <span class="token-label">Distributed:</span>
                            <span class="token-value" id="distributedTokens">0 BUD</span>
                        </div>
                        <div class="token-stat">
                            <span class="token-label">Current Price:</span>
                            <span class="token-value" id="tokenPrice">$0.0001</span>
                        </div>
                        <div class="token-stat">
                            <span class="token-label">Active Players:</span>
                            <span class="token-value" id="activePlayers">1</span>
                        </div>
                    </div>
                </div>
                
                <!-- Calculator Tab Content -->
                <div class="tab-content" id="calculatorTab">
                    <div class="calculator-form">
                        <div class="calc-field">
                            <label class="calc-label">Market Cap:</label>
                            <input type="text" class="calc-input" id="calcMarketCap" placeholder="0">
                        </div>
                        <div class="calc-field">
                            <label class="calc-label">BUD Amount:</label>
                            <input type="text" class="calc-input" id="calcBudAmount" placeholder="0">
                        </div>
                        <div class="calc-result">
                            <span class="result-label">Estimated Rewards:</span>
                            <span class="result-value" id="calcResult">$0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Casino Tab Content -->
                <div class="tab-content" id="casinoTab">
                    <div class="casino-container">
                        <div class="cali-flip-title">CALI FLIP</div>
                        
                        <div class="casino-actions">
                            <button class="coming-soon-btn" disabled>COMING SOON</button>
                        </div>
                    </div>
                </div>

                <!-- Profile Tab Content -->
                <div class="tab-content active" id="profileTab">
                    <div class="profile-details">
                        <!-- First Row: Username and Referrals -->
                        <div class="profile-row">
                            <div class="profile-stat profile-half">
                                <span class="profile-label">Username:</span>
                                <span class="profile-value" id="profileUsername">Loading...</span>
                            </div>
                            <div class="profile-stat profile-half">
                                <span class="profile-label">Referrals:</span>
                                <span class="profile-value" id="profileReferrals">Loading...</span>
                            </div>
                        </div>
                        
                        <!-- Second Row: Wallet Address (full width) -->
                        <div class="profile-row">
                            <div class="profile-stat profile-full">
                                <span class="profile-label">Wallet Address:</span>
                                <span class="profile-value" id="profileWallet">Loading...</span>
                            </div>
                        </div>
                        
                        <!-- Third Row: Referral Code (full width) -->
                        <div class="profile-row">
                            <div class="profile-referral-section">
                                <span class="profile-label">Referral Code:</span>
                                <div class="profile-referral-code">
                                    <span class="profile-value" id="profileReferralCode">Loading...</span>
                                    <button class="profile-copy-btn" id="profileCopyBtn">COPY</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="leaderboard">
                <h3>SHOP</h3>
                <div class="shop-items" id="shopItems">
                    <!-- Shop items will be added dynamically -->
                </div>
            </div>
        </section>
        </div>

    <!-- Customization Modal -->
    <div class="customize-modal" id="customizeModal" style="display: none;">
        <div class="customize-modal-content">
            <button class="customize-close-btn" id="customizeCloseBtn">âœ•</button>
            <h2 class="customize-title">CUSTOMIZE ROOM</h2>
            
            <div class="customize-category">
                <h3>Background Theme</h3>
                <div class="background-options" id="backgroundOptions">
                    <!-- Background options will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- JavaScript files -->
    <script src="js/config.js"></script>
    <script src="js/config/supabase.config.js"></script>
        <script src="js/supabaseClient.js?v=2.0"></script>
    <script src="js/authSystem.js?v=1.0"></script>
    <script src="js/sounds/soundEffects.js"></script>
    <script src="js/itemsConfig.js"></script>
    <script src="js/gameState.js"></script>
    <script src="js/plantSystem.js"></script>
    <script src="js/tokenSystem.js?v=1.1"></script>
    <script src="js/gridSystem.js?v=1.3"></script>
    <script src="js/gridAligner.js?v=1.1"></script>
    <script src="js/plantPlacement.js?v=11.0"></script>
    <script src="js/inventorySystem.js?v=4.0"></script>
    <script src="js/shopSystem.js?v=3.7"></script>
    <script src="js/roomCustomizer.js?v=1.1"></script>
    <script src="js/ui.js?v=1.3"></script>
    <script src="js/main.js?v=8.0"></script>
</body>
</html>